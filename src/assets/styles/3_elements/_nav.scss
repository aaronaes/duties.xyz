header {
  @include display-grid;
  position: absolute;
  top: 0;
  margin: 0;
  width: 100%;
  z-index: 9000;

  &.active {
    background-color: var(--black);
    position: fixed;
    width: 100%;
    height: 100%;
    top: 0;
    right: 0;
    left: 0;

    @include breakpoint(small only) {
      @media (hover: none) and (pointer: coarse) {
        height: 100vh;
      }
    }

    & > * {
      color: var(--white) !important;
    }
  }

  .navigation {
    @include display-grid;
    grid-column: 1 / 26;
    width: 100vw;
    position: relative;

    .header {
      grid-column: 1 / 26;
      position: relative;
      justify-content: space-between;
      align-items: flex-start;
      height: fit-content;
      margin-top: var(--space-sm);
      margin-bottom: var(--space-sm);

      @include breakpoint(small only) {
        margin-top: var(--x1p5);
      }

      .nav-item {
        position: relative;
        margin: 0;
        padding: 0;
        grid-row: 1;
        align-self: center;

        &.menu {
          position: relative;
          justify-self: flex-end;
          float: right;
          cursor: pointer;

          &.active {
            .burger {
              svg {
                path {
                  fill: #bcbcbc !important;
                }
              }
            }
          }

          .burger {
            position: relative;
            display: flex;
            width: clamp(32px, 4vw, 40px);
            height: clamp(32px, 4vw, 40px);
            align-items: center;
            justify-content: center;

            svg {
              position: absolute;
              top: 50%;
              transform: translateY(-50%);

              path {
                fill: var(--blue) !important;
              }
            }
          }
        }

        a {
          cursor: pointer;
          border: none;
          position: relative;
        }

        &.logo {
          cursor: pointer;
          a {
            display: block;
            width: fit-content;
            height: clamp(32px, 4vw, 40px);

            &:hover {
              span {
                display: inline-block;

                &.site-title {
                  opacity: 0;
                  display: none;
                }

                &.close {
                  display: block;
                  opacity: 1;
                }

                &.page-title {
                  opacity: 0;
                  display: none;
                }
              }
            }

            h3 {
              line-height: 1;

              span {
                display: inline-block;

                &.site-title {
                  display: inline-block;
                  margin-right: var(--space-xs);

                  &:after {
                    content: ":";
                    font-family: var(--font-tex-regular);
                  }
                }

                &.close {
                  display: none;
                  opacity: 0;
                }

                &.page-title {
                  display: inline-block;
                  margin-right: var(--space-xs);
                }
              }
            }
          }

          &.active {
            display: none;
          }
        }
      }

      .time {
        position: absolute;
        top: 0;
        margin: 0;
        display: none;
        order: -1;
        grid-row: 1;
        transform: translateY(12px);
        grid-column: 1 / 23;

        @include breakpoint(small only) {
          position: absolute;
          top: 0;
          left: 0;
          transform: translateY(0px);
        }

        &.active {
          display: block;
        }

        .font-swapper {
          cursor: pointer;
        }

        h3,
        p {
          margin: 0;
          padding: 0;
          display: inline-block;

          &.title {
            grid-column: 1 / 6;
            grid-row: 1;
            display: block;
          }

          &.status {
            grid-column: 1 / 6;
            grid-row: 2;
          }

          span {
            &.blinking {
              content: ":";
              white-space: pre;
              overflow: hidden;
              display: inline;
              vertical-align: bottom;
              animation: blinker 1s step-start infinite;
            }
          }

          @keyframes blinker {
            50% {
              opacity: 0;
            }
          }

          span.highlight {
            color: var(--red);
            cursor: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg'  width='100' height='120' viewport='0 0 100 100' style='fill:black;font-size:60px;'><text y='50%'>‚è∞</text></svg>")
                32 32,
              auto !important;
            padding-left: var(--space-xxs);
          }
        }
      }
    }

    .media {
      position: absolute;
      right: var(--x0p5);
      bottom: var(--x0p5);
      width: var(--x8);
      z-index: -1;

      @include breakpoint(small only) {
        @media (hover: none) and (pointer: coarse) {
          width: calc(var(--x10) - var(--x0p5));
          right: var(--x1p5);
          bottom: var(--space-md);
        }
      }

      img {
        opacity: 0;
        &.showMe {
          opacity: 1;
        }
      }
    }

    .main {
      grid-column: 1 / 26;
      grid-row: 2;
      align-self: flex-end;
      display: none;
      margin-bottom: var(--x0p5);
      pointer-events: none;

      &.active {
        pointer-events: all;
        display: block;
      }

      @include breakpoint(small only) {
        padding-bottom: var(--x0p5);
      }

      .list {
        grid-column: 1 / 26;
        align-self: flex-end;

        * {
          cursor: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg'  width='100' height='120' viewport='0 0 100 100' style='fill:black;font-size:60px;'><text y='50%'>üëÄ</text></svg>")
              32 32,
            auto !important;
        }

        ul {
          display: inline-block;
          padding: 0;

          li {
            list-style: none;
            display: block;
            position: relative;
            clear: both;
            margin: 0;

            a {
              border: none !important;

              h2 {
                margin: 0;
                padding: 0;

                &::after {
                  content: ":";
                  font-family: var(--font-tex-regular);
                  visibility: hidden;
                  line-height: 1;
                }
              }

              &:hover {
                * {
                  color: var(--red);
                }

                h2 {
                  &::after {
                    content: ":";
                    visibility: visible;
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}

body.navOpen {
  height: 100vh;
  overflow: hidden;

  * {
    color: var(--white);
  }

  @include breakpoint(small only) {
    position: fixed;
  }

  @include breakpoint(small only) {
    main#page {
      filter: url(#blur);
      filter: blur(4px);
    }
  }
}
